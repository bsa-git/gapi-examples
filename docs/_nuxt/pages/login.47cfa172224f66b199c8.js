webpackJsonp([2],{"+HMp":function(e,t,n){"use strict";var o=n("//Fk"),i=n.n(o),s=n("pFYg"),c=n.n(s),a=n("Zrlr"),r=n.n(a),u=n("wxAW"),l=n.n(u),g=function(){function e(t){r()(this,e),this.debug=!!t.debug,this.directAccess=!0,this.gapiUrl="https://apis.google.com/js/platform.js",this.config=null,"object"===(void 0===t?"undefined":c()(t))&&(this.config=t),this.auth2=null,this.currentUser=null}return l()(e,[{key:"loadAuth",value:function(){var e=this;return new i.a(function(t,n){void 0===window.gapi?e._loadGoogleApi().then(function(){return e.debug&&console.log("loadGoogleAPI - OK"),e._initAuth()}).then(function(){e.debug&&console.log("googleAuth.init - OK"),t()}):void 0!==window.gapi&&void 0===window.gapi.auth2&&e._initAuth().then(function(){e.debug&&console.log("googleAuth.init - OK"),t()})})}},{key:"loadClient",value:function(e){var t=this;return new i.a(function(n,o){void 0===window.gapi?t._loadGoogleApi().then(function(){return t.debug&&console.log("loadGoogleAPI - OK"),t._initClient()}).then(function(){t.debug&&console.log("googleClient.init - OK"),n()}):t._initClient(e).then(function(){t.debug&&console.log("googleClient.init - OK"),n()})})}},{key:"setDirectAccess",value:function(e){this.directAccess=e}},{key:"signIn",value:function(e,t){var n=this;this.directAccess?this.auth2.signIn().then(function(t){n.debug&&console.log("GoogleAuth.signIn - OK"),e(t)},function(e){t(e)}):this.auth2.grantOfflineAccess({redirect_uri:"postmessage"}).then(function(t){n.debug&&console.log("GoogleAuth.grantOfflineAccess - OK"),e(t.code)},function(e){t(e)})}},{key:"signOut",value:function(e,t){var n=this;this.auth2.signOut().then(function(){n.debug&&console.log("GoogleAuth.signOut - OK"),e()},function(e){t(e)})}},{key:"addScope",value:function(e,t,n){var o=this;return new i.a(function(i,s){var c=new window.gapi.auth2.SigninOptionsBuilder;c.setScope(e),o.currentUser.grant(c).then(function(e){o.debug&&console.log("GoogleAuth.addScope - OK"),t(e),i()},function(e){console.log("GoogleAuth.addScope - Error:",e),n(e)})})}},{key:"disconnect",value:function(){this.auth2.disconnect(),this.debug&&console.log("GoogleAuth.disconnect - OK")}},{key:"isSignedIn",value:function(){return this.auth2.isSignedIn.get()}},{key:"listenSignedIn",value:function(e){this.auth2.isSignedIn.listen(e),this.debug&&console.log("listenSignedIn - OK")}},{key:"listenCurrentUser",value:function(e){this.auth2.currentUser.listen(e),this.debug&&console.log("listenCurrentUser - OK")}},{key:"isCurrentUser",value:function(){return!!this.currentUser.getId()}},{key:"_loadGoogleApi",value:function(){var e=this;return new i.a(function(t,n){var o=document.createElement("script");o.src=e.gapiUrl,o.onreadystatechange=o.onload=function(){o.readyState&&!/loaded|complete/.test(o.readyState)||setTimeout(function(){t()},500)},document.getElementsByTagName("head")[0].appendChild(o)})}},{key:"_initAuth",value:function(){var e=this;return new i.a(function(t,n){window.gapi.load("auth2",function(){var n=this;e.auth2=window.gapi.auth2.init(e.config),e.auth2.then(function(){e.listenCurrentUser(function(t){e.currentUser=t}),t()},function(e){n.error=e,console.error("gapi.auth2.init - Error",e),alert("gapi.auth2.init - Error: "+e.error+"\n Details: "+e.details)})})})}},{key:"_initClient",value:function(e){var t=this;return new i.a(function(n,o){var i=function(){var o=this;window.gapi.client.init({apiKey:e.apiKey,clientId:e.clientId,discoveryDocs:e.discoveryDocs,scope:e.scope?e.scope.join(" "):""}).then(function(){t.auth2=window.gapi.auth2.getAuthInstance(),t.listenCurrentUser(function(e){t.currentUser=e}),n()},function(e){o.error=e,console.error("gapi.client.init - Error",e),alert("gapi.client.init - Error: "+e.error+"\n Details: "+e.details)})};if(void 0===window.gapi.client){var s=void 0===window.gapi.auth2?"client:auth2":"client";window.gapi.load(s,i)}else i()})}}]),e}();t.a=g},"8jbd":function(e,t,n){"use strict";function o(e){n("gsXE")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("uUzE"),s=n("xtWc"),c=n("VU/8"),a=o,r=c(i.a,s.a,a,null,null);t.default=r.exports},Bg4N:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,".button--green{display:inline-block;border-radius:4px;border:1px solid #3b8070;color:#3b8070;text-decoration:none;padding:10px 30px}.button--green:hover{color:#fff;background-color:#3b8070}.button--grey{display:inline-block;border-radius:4px;border:1px solid #35495e;color:#35495e;text-decoration:none;padding:10px 30px;margin-left:15px}.button--grey:hover{color:#fff;background-color:#35495e}",""])},Zrlr:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},gsXE:function(e,t,n){var o=n("Bg4N");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("7a48227f",o,!0)},uUzE:function(e,t,n){"use strict";var o=n("Dd8w"),i=n.n(o),s=n("NYxO"),c=n("+HMp");t.a={data:function(){return{title:"Login/Logout Google User",description:"Handling Google sign-in and sign-out.",loading:"",response:""}},head:function(){return{title:this.title,meta:[{hid:"description",name:"description",content:this.description}],link:[]}},created:function(){if(!this.$isServer&&this.config.debug&&console.log("login.created - OK"),!this.$isServer){var e={debug:this.config.debug,clientId:this.config.gapi.clientId};this.$store.commit("SET_GOOGLE_API",new c.a(e))}},mounted:function(){var e=this;if(this.config.debug&&console.log("login.mounted - OK"),this.isStatic){var t={apiKey:this.config.gapi.apiKey,clientId:this.config.gapi.clientId,discoveryDocs:this.config.gapi.services.people.discoveryDocs,scope:this.config.gapi.services.people.scopes.get};this.authGoogle.loadClient(t).then(function(){e.config.debug&&console.log("authGoogle.load - OK")})}},computed:i()({},Object(s.mapGetters)({config:"getConfig",isAuth:"isAuth",authGoogle:"getGapi",isStatic:"isStatic"})),methods:{signIn:function(){var e=this;this.toggleLoading(),this.isStatic?window.setTimeout(function(){e.authGoogle.signIn(e.onSignInSuccess,e.onSignInError)},1e3):window.setTimeout(function(){e.onSignInSuccess(e.config.gapi.services.auth.testAuthorizationCode)},1e3)},signOut:function(){var e=this;this.toggleLoading(),this.isStatic?window.setTimeout(function(){e.authGoogle.signOut(e.onSignOutSuccess,e.onSignOutError)},1e3):window.setTimeout(function(){e.onSignOutSuccess()},1e3)},disconnect:function(){var e=this;this.isStatic?window.setTimeout(function(){e.authGoogle.disconnect(),e.onDisconnect()},1e3):window.setTimeout(function(){e.onDisconnect()},1e3)},addScope:function(){var e=this;this.isStatic?window.setTimeout(function(){e.authGoogle.addScope("https://www.googleapis.com/auth/drive",e.onAddScopeSuccess,e.onAddScopeError).then(function(){})},1e3):window.setTimeout(function(){e.onAddScopeSuccess("AddScopeSuccess")},1e3)},onSignInSuccess:function(e){this.toggleLoading(),this.resetResponse();var t=e.getId();if(window.localStorage&&window.localStorage.setItem("token",t),this.$store.commit("SET_TOKEN",t),this.authGoogle.isCurrentUser()){var n=this.authGoogle.currentUser.getAuthResponse().id_token;console.log("CurrentUser - Token: "+n);var o=this.authGoogle.currentUser.getBasicProfile();console.log("ID: "+o.getId()),console.log("Full Name: "+o.getName()),console.log("Given Name: "+o.getGivenName()),console.log("Family Name: "+o.getFamilyName()),console.log("Image URL: "+o.getImageUrl()),console.log("Email: "+o.getEmail())}},onSignInError:function(e){this.response="Failed to sign-in",console.log("GOOGLE SERVER - SIGN-IN ERROR",e)},onSignOutSuccess:function(){if(this.toggleLoading(),this.resetResponse(),window.localStorage){if(!this.$store.state.auth.token){var e=window.localStorage.getItem("token");this.$store.commit("SET_TOKEN",e)}window.localStorage.setItem("token",null)}this.$store.commit("SET_TOKEN",null)},onSignOutError:function(e){this.response="Failed to sign-out",console.log("GOOGLE SERVER - SIGN-OUT ERROR",e)},onDisconnect:function(){if(window.localStorage){if(!this.$store.state.auth.token){var e=window.localStorage.getItem("token");this.$store.commit("SET_TOKEN",e)}window.localStorage.setItem("token",null)}this.$store.commit("SET_TOKEN",null)},onAddScopeSuccess:function(e){var t=e.getId();this.response="Success to add-scope for UserId="+t},onAddScopeError:function(e){this.response="Failed to add-scope",console.log("GOOGLE SERVER - ADD-SCOPE ERROR",e)},onCurrentUser:function(e){if(this.config.debug&&(console.log("authGoogle.CurrentUser.id:",e.getId()),e.getId())){var t=e.getBasicProfile();console.log("CurrentUser - ID: "+t.getId()),console.log("CurrentUser - Name: "+t.getName()),console.log("CurrentUser - Image URL: "+t.getImageUrl()),console.log("CurrentUser - Email: "+t.getEmail())}},toggleLoading:function(){this.loading=""===this.loading?this.isAuth?"Logout":"Login":""},resetResponse:function(){this.response=""}}}},wxAW:function(e,t,n){"use strict";t.__esModule=!0;var o=n("C4MV"),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i.default)(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()},xtWc:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container"},[n("div",{staticClass:"text-center"},[n("h2",[e._v(e._s(e.title))])]),e._m(0),n("div",{staticClass:"jumbotron well text-center"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"text-danger lead"},[n("p",[e._v(e._s(e.loading)+"...")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.response,expression:"response"}],staticClass:"text-danger lead"},[n("p",[e._v(e._s(e.response))])]),n("div",{staticClass:"auth-btns"},[e.isAuth?n("div",[n("p",[e._v("You are currently signed in and have granted access to this app.")]),n("br"),n("a",{staticClass:"button--grey",on:{click:e.signOut}},[n("span",{staticClass:"glyphicon glyphicon-log-out",attrs:{"aria-hidden":"true"}}),e._v("\n          Sign out")]),n("a",{staticClass:"button--grey",on:{click:e.disconnect}},[n("span",{staticClass:"glyphicon glyphicon-remove",attrs:{"aria-hidden":"true"}}),e._v(" Revoke access")]),n("a",{staticClass:"button--grey",on:{click:e.addScope}},[n("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}}),e._v(" Add scope")])]):n("div",[n("p",[e._v("You have not authorized this app or you are signed out.")]),n("br"),n("a",{staticClass:"button--green",on:{click:e.signIn}},[n("span",{staticClass:"glyphicon glyphicon-log-in",attrs:{"aria-hidden":"true"}}),e._v(" Sign In/Authorize")])])])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bs-callout-info bs-callout"},[n("h4",[e._v("Get a Google Account")]),n("p",[e._v("To test Google services you need to have an Google Account.")]),n("p",[e._v("First, "),n("a",{attrs:{href:"https://www.google.com/accounts",target:"_blank"}},[e._v("sign up")]),e._v(" for a\n      Google Account if you do not already have one.\n    ")])])}],s={render:o,staticRenderFns:i};t.a=s}});
//# sourceMappingURL=login.47cfa172224f66b199c8.js.map